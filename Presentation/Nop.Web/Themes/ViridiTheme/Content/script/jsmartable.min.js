$.fn.jsmartable = function (a) { var t = $.extend({ breakpoint: { xs: 480, sm: 576, md: 992, lg: 1200, xlg: 1400 }, iconPlus: '<i class="fa fa-plus"></i>', iconMinus: '<i class="fa fa-minus text-danger"></i>', allExpended: !1 }, a), e = this, n = $(window).width(); function r() { var a = $(window).width(); e.each(function () { var e = $(this), n = e.data("all-expanded"); void 0 === n && (n = t.allExpended); var r = e.find("thead tr:first th[data-breakpoint]"); if (r.length <= 0) return !1; e.find("> tbody > tr").not(".jsmartable-row").each(function (e) { var d = $(this), l = (d.find("td"), d.data("formated")), s = d.data("expanded"), o = '<table class="jsmartable-subtable table table-bordered">\n                                <tbody>', b = 0; for (i = 0; i < r.length; i++) { var c = r.eq(i), f = c.prop("cellIndex") + 1, m = c.data("breakpoint"), h = d.find("td:nth-child(" + f + ")"), u = h.data("title"); if (void 0 !== u && "" != u || (u = c.html()), h <= 0) return console.log("TD Column " + f + " not found"), !1; "undefined" != t.breakpoint[m] && t.breakpoint[m] >= a ? (h.find(":input").prop("disabled", !1), o += `<tr class="jsmartable-subrow">\n                            <td class="jsmartable-subcol" style="width:30%; background:#eee;">${u}</td>\n                            <td class="jsmartable-subcol">${h.html()}</td>\n                        </tr>`, h.find(":input").prop("disabled", !0), c.hide(), h.hide(), b++) : (c.show(), h.show(), h.find(":input").prop("disabled", !1)) } if (o += "\n                    </tbody>\n                </table>", void 0 === l && b > 0) { d.data("formated", !0), d.after(`<tr id="jsmartable-row-${e}" class="jsmartable-row">\n                        <td colspan='100%' class="jsmartable-col">\n                            ${o}\n                        </td>\n                    </tr>`), $(`#jsmartable-row-${e} :input`).each(function (a) { var t = $(this).attr("id"); t && $(this).attr("id", `${t}-clone`) }), $(`#jsmartable-row-${e} label`).each(function (a) { var t = $(this).attr("for"); t && $(this).attr("for", `${t}-clone`) }); var p = t.iconMinus; void 0 !== s && 0 != s || void 0 !== n && 0 != n || ($("#jsmartable-row-" + e).hide(), p = t.iconPlus), $("#jsmartable-row-" + e).prev().find("td:visible").first().prepend(`<a href='javascript:void(0);' class="mr-2 jsmartable-collapse" data-opened="true">${p}</a>`) } else l && b > 0 ? $("#jsmartable-row-" + e + " > td").html(o) : b <= 0 && (d.removeData("formated"), $("#jsmartable-row-" + e).remove(), $(".jsmartable-collapse").remove()) }) }) } $(window).resize(function () { n != $(window).width() && (r(), n = $(window).width()) }), r(), $("body").on("click", ".jsmartable-collapse", function () { var a = $(this), e = a.closest("td").closest("tr").next(); e.is(":visible") ? (e.fadeOut("fast"), a.html(t.iconPlus)) : (e.fadeIn(), a.html(t.iconMinus)) }) }, $(".jsmartable").jsmartable();